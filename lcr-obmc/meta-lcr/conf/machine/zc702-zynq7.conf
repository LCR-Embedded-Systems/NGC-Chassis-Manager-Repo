PREFERRED_PROVIDER_virtual/bootloader ?= "u-boot-lcr"
PREFERRED_PROVIDER_u-boot ?= "u-boot-lcr"

PREFERRED_PROVIDER_virtual/kernel ?= "linux-lcr"
PREFERRED_VERSION_linux-enclustra ?= "5.15%"

PREFERRED_PROVIDER_enzianbmc-fpga = "enzianbmc-zx5-fpga"

MACHINE_FEATURES = "ext2 vfat usbhost"

DEFAULTTUNE ?= "cortexa9hf-vfpv3"
require conf/machine/include/arm/armv7a/tune-cortexa9.inc

UBOOT_MACHINE = "lcr_bootloader_defconfig"
# UBOOT_MACHINE = "lcr_bootloader_defconfig"
SPL_BINARY = "spl/boot.bin"
SPL_SUFFIX = "bin"
UBOOT_SUFFIX = "itb"
UBOOT_ELF = "u-boot.elf"
UBOOT_ENV = "boot"
UBOOT_ENV_SUFFIX = "scr"

SERIAL_CONSOLES = "115200;ttyPS0 115200;ttyPS1"

KERNEL_IMAGETYPE = "zImage"

KERNEL_DEVICETREE = "system-top.dtb"

# Overwrite flash offsets
# FLASH_UBOOT_OFFSET = "0"
# FLASH_KERNEL_OFFSET = "6144"
# FLASH_UBI_OFFSET = "${FLASH_KERNEL_OFFSET}"
# FLASH_ROFS_OFFSET = "12288"
# FLASH_RWFS_OFFSET = "65024"
# FLASH_SIZE = "65536"

IMAGE_FSTYPES = "cpio cpio.gz cpio.gz.u-boot ext4 tar.gz ubi"
MKUBIFS_ARGS = "-m 2048 -e 126976 -c 2000"
UBINIZE_ARGS = "-m 2048 -p 128KiB"
